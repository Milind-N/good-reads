(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(46)},25:function(e,t,a){},26:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),c=a.n(r),s=(a(25),a(2)),l=a(3),i=a(6),m=a(4),u=a(5),h=(a(26),a(7)),p=a(8),d=a(10),g=a.n(d),b=function(e){var t=e.books,a=e.expandBook,n=t.best_book.title,r=n.split(" ").slice(0,4).join(" ");return n.length>r.length&&(r+="..."),o.a.createElement("div",{className:"col-lg-2 col-sm-4 col-md-3 pt-2"},o.a.createElement("div",{className:"card h-100"},o.a.createElement("img",{className:"card-img-top",src:t.best_book.image_url,alt:"Book cover",height:"200px",onClick:function(){return a(t)}}),o.a.createElement("div",{className:"card-block  pl-2 pr-2 pt-2"},o.a.createElement("h5",{className:"card-title","data-toggle":"tooltip","data-placement":"bottom",title:r.includes("...")?n:""},r),o.a.createElement("h6",{className:"text-muted"},t.best_book.author.name))))},f=function(e){var t=e.books,a=e.expandBook;return o.a.createElement("div",null,o.a.createElement("div",{className:"row"},t.length>0?o.a.createElement("p",null,"PAGE 1 OF ABOUT ",t.length," RESULTS (0.18 SECONDS)"):""),o.a.createElement("div",{className:"row"},t.map(function(e){return o.a.createElement(b,{books:e,key:e.id,expandBook:a})})))},k="ynuEDG9y5v4bh1ADHBHw",E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={searchText:"",error:"",fetchingData:!1},a.onTextChange=function(e){a.setState({searchText:e.target.value})},a.onButtonClick=function(){a.setState({fetchingData:!0});var e=a.state.searchText,t="https://mysterious-waters-52302.herokuapp.com/https://www.goodreads.com/search/index.xml?key=".concat(k,"&q=").concat(e);g.a.get(t).then(function(e){a.parseXMLResponse(e.data)}).catch(function(e){a.setState({error:e.toString(),fetchingData:!1})})},a.parseXMLResponse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml");if(t.getElementsByTagName("parsererror").length)a.setState({error:"An error occurred while fetching the data.",fetchingData:!1});else{var n=Object(h.a)(Array,Object(p.a)(t.getElementsByTagName("work"))).map(function(e){return a.XMLToJson(e)});console.log(n),a.setState({fetchingData:!1},function(){a.props.setResults(n)})}},a.XMLToJson=function(e){var t=Object(h.a)(Array,Object(p.a)(e.children)),n={};return t.forEach(function(e){e.children.length?n[e.nodeName]=a.XMLToJson(e):n[e.nodeName]=e.innerHTML}),n},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("input",{className:"mr-1 col-sm-9 form-control",type:"text",placeholder:"Search Books by title or author",name:"searchText",onChange:this.onTextChange,value:this.state.searchText}),o.a.createElement("button",{className:"col-sm-2 btn btn-primary",onClick:this.onButtonClick},"Search")),this.state.fetchingData?o.a.createElement("p",{className:"lead text-center"},"loading..."):this.state.error&&o.a.createElement("p",{className:"text-danger"},this.state.error)||o.a.createElement(f,{books:this.props.results,expandBook:this.props.expandBook}))}}]),t}(n.Component),v=function(e){var t=e.authors;return o.a.createElement("p",null,"By:"," ",t.map(function(e,t){return o.a.createElement("span",{key:e.id,className:"font-weight-bold"},t?", ":"",o.a.createElement("a",{href:e.link},e.name),e.role?"(".concat(e.role,")"):"")}))},y="ynuEDG9y5v4bh1ADHBHw",w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getDescription=function(){var e=a.props.books.best_book.id,t="https://mysterious-waters-52302.herokuapp.com/https://www.goodreads.com/book/show/".concat(e,"?key=").concat(y);g.a.get(t).then(function(e){var t=new DOMParser,n=t.parseFromString(e.data,"application/xml");if(n.getElementsByTagName("parsererror").length)a.setState({error:"An error occurred while fetching the data."});else{var o=n.getElementsByTagName("description")[0].innerHTML;(o=o.replace("<![CDATA[","").replace("]]>",""))||(o="No description found."),a.setState({description:o});var r=n.getElementsByTagName("authors")[0].innerHTML;r=r.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),r="<authors>".concat(r,"</authors>");var c=t.parseFromString(r,"application/xml"),s=Object(h.a)(Array,Object(p.a)(c.getElementsByTagName("author"))).map(function(e){return a.XMLToJson(e)});console.log(s),a.setState({searchResults:s})}}).catch(function(e){a.setState({error:e.toString()})})},a.XMLToJson=function(e){var t=Object(h.a)(Array,Object(p.a)(e.children)),n={};return t.forEach(function(e){e.children.length?n[e.nodeName]=a.XMLToJson(e):n[e.nodeName]=e.innerHTML}),n},a.state={searchResults:[],description:"Fetching description for this book...",error:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getDescription()}},{key:"render",value:function(){var e=this.props.books;return o.a.createElement("div",{className:"row col-lg-12"},o.a.createElement("div",{className:"col-lg-2 col-sm-4"},o.a.createElement("img",{src:e.best_book.image_url,height:"200px",width:"130px",alt:"book cover"})),o.a.createElement("div",{className:"col-lg-10 col-sm-8"},o.a.createElement("h3",{className:"mb-3"},e.best_book.title),o.a.createElement(v,{authors:this.state.searchResults}),o.a.createElement("p",null,"Avg. Rating: ",e.average_rating),this.state.error&&o.a.createElement("p",{className:"text-danger"},this.state.error)||o.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.state.description}})),o.a.createElement("div",null,o.a.createElement("p",null,"Published Date:"," ","".concat(e.original_publication_day,"/").concat(e.original_publication_month,"/").concat(e.original_publication_year),"."," "),o.a.createElement("button",{className:"btn btn-primary",onClick:this.props.collapseBook},"Go Back")))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={results:[],expandedBook:null},a.setResults=function(e){a.setState({results:e})},a.collapseBook=function(){a.setState({expandedBook:null})},a.expandBook=function(e){a.setState({expandedBook:e})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"header clearfix mt-5"},o.a.createElement("h3",{className:"text-muted"},"Goodreads Book Search ")),o.a.createElement("div",{className:"jumbotron"},this.state.expandedBook?o.a.createElement(w,{books:this.state.expandedBook,collapseBook:this.collapseBook}):o.a.createElement(E,{results:this.state.results,setResults:this.setResults,expandBook:this.expandBook})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.e58677f1.chunk.js.map